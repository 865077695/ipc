<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        html,body,ul,li,img{margin:0;padding:0}
        img{width:100%;}
        li{height: 160px;float: left}
    </style>
</head>
<body>
<img src="images/redLight/1.png" alt="">
<img src="images/redLight/2.png" alt="">
<img src="images/redLight/3.png" alt="">
<div id="div1">
    <ul>
        <li data-src="images/redLight/1.png"></li>
        <li data-src="images/redLight/2.png"></li>
        <li data-src="images/redLight/3.png"></li>
        <li data-src="images/redLight/4.png"></li>
        <li data-src="images/redLight/5.png"></li>
        <li data-src="images/redLight/6.png"></li>
        <li data-src="images/redLight/7.png"></li>
        <li data-src="images/redLight/8.png"></li>
        <li data-src="images/redLight/9.png"></li>
        <li data-src="images/redLight/10.png"></li>
        <li data-src="images/redLight/11.png"></li>
        <li data-src="images/redLight/12.png"></li>
        <li data-src="images/redLight/13.png"></li>
        <li data-src="images/redLight/14.png"></li>
        <li data-src="images/redLight/15.png"></li>
        <li data-src="images/redLight/16.png"></li>
        <li data-src="images/redLight/17.png"></li>
    </ul>
</div>

<script>
    function setImg(index){
        var oDiv=document.getElementById("div1")
        var oUl=oDiv.children[0];
        var aLi=oUl.children;
        if (aLi[index].dataset) {
            var src=aLi[index].dataset.src;
        } else{
            var src=aLi[index].getAttribute('data-src');
        }
        var oImg=document.createElement('img');
        oImg.src=src;
        if (aLi[index].children.length==0) {
            aLi[index].appendChild(oImg);
        }
    }
    //获得对象距离页面顶端的距离
    function getH(obj) {
        var h = 0;
        while (obj) {
            h += obj.offsetTop;
            obj = obj.offsetParent;
        }
        return h;
    }
    window.onscroll = function () {
        var oDiv = document.getElementById('div1');
        var oUl = oDiv.children[0];
        var aLi = oUl.children;
    
        for (var i = 0, l = aLi.length; i < l; i++) {
            var oLi = aLi[i];
            //检查oLi是否在可视区域
            var t = document.documentElement.clientHeight + (document.documentElement.scrollTop || document.body.scrollTop);
            var h = getH(oLi);
            if (h < t) {
                setTimeout("setImg(" + i + ")", 500);
            }
        }
    };
    //当页面加载完成以后要主动运行一下window.onscroll，从而获得当前可视范围内的图片
    window.onload = function () {
        window.onscroll();
    };
</script>
</body>
</html>